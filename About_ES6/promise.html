<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script src="jquery-3.5.1.js"></script>
  <script>
    //callback hell 回调深渊/回调地狱
    // $.get('a.json', res => {
    //   console.log(res);
    //   $.get('b.json', res => {
    //     console.log(res);
    //     $.get('c.json', res => {
    //       console.log(res);
    //     })
    //   })
    // }, 'json')


    //promise
    // new Promise((resolve, reject) => {
    //   $.get('a.json', res => {
    //     console.log(res);
    //     resolve(res);
    //   }, 'json');
    // }).then(res => {
    //   console.log('a成功');

    //   return new Promise((resolve, reject) => {
    //     $.get('b.json', res => {
    //       console.log(res);
    //       resolve(res);
    //     })
    //   })
    // }, err => {
    //   console.log('a成功', res)
    // }).then(res => {
    //   console.log('b成功', res);

    //   return new Promise((resolve, reject) => {
    //     $.get('c.json', res => {
    //       console.log(res);
    //       resolve(res);
    //     }, 'json');
    //   })
    // }, err => {
    //   console.log('b失败', res)
    // }).then(res => {
    //   console.log('c成功', res)
    // }, err => {
    //   console.log('c失败', res)
    // })

    // let getPromise = url => {
    //   return new Promise((resolve, reject) => {
    //     $.get(url, res => {
    //       resolve(res)
    //     }, 'json')
    //   })
    // }

    // getPromise('a.json').then(res => {
    //   console.log(res);

    //   return getPromise('b.json')
    // }).then(res => {
    //   console.log(res);

    //   return getPromise('c.json');
    // }).then(res => {
    //   console.log(res)
    // })

    //多张图片上传功能
    let p1 = new Promise((resolve, reject) => {
      setTimeout(() => {
        console.log('p1')
        resolve(1);
      }, 1000)
    })

    let p2 = new Promise((resolve, reject) => {
      setTimeout(() => {
        console.log('p2')
        resolve(2);
      }, 2000)
    })

    let p3 = new Promise((resolve, reject) => {
      setTimeout(() => {
        console.log('p3')
        resolve(3);
        // reject(4);
      }, 3000)
    })

    // Promise.all([p1, p2, p3]).then(res => {
    //   console.log('全成功', res)
    // }, err => {
    //   console.log('失败啦', err)
    // })

    Promise.race([p1, p2, p3]).then(res => {
      console.log('全成功', res)
    }, err => {
      console.log('失败啦', err)
    })
  </script>
</body>

</html>